define("local_quizanon/searchanon",["exports","core/templates","core/str"],(function(_exports,_templates,_str){var obj;
/**
   * Search anon user by code.
   *
   * @module     local_quizanon/searchanon
   * @copyright  2024 Moodle US.
   * @author     Oscar Nadjar <oscar.nadjar@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{var searchInput=document.getElementById("id_anonsearch");let searchButton,inputElement,usercode;searchInput.setAttribute("hidden","hidden"),searchInput&&_templates.default.render("local_quizanon/searchbar",{searchInput:searchInput}).then((html=>{let newSearchInput=document.createElement("div");searchInput.parentElement.appendChild(newSearchInput),newSearchInput.innerHTML=html,searchButton=document.getElementById("searchbutton-anon"),inputElement=document.getElementById("searchinput-anon"),inputElement.addEventListener("keypress",(event=>{"Enter"===event.key&&(event.preventDefault(),document.getElementById("searchbutton-anon").click())})),searchButton.addEventListener("click",(async function(){usercode=inputElement.value;let errorcontainer=document.getElementById("error-search-anon");if(!usercode)return errorcontainer.innerHTML=await(0,_str.get_string)("searchinputempty","local_quizanon"),void(errorcontainer.attributes.getNamedItem("hidden")&&errorcontainer.attributes.removeNamedItem("hidden"));if(!/^[a-z0-9]{6}$/i.test(usercode))return errorcontainer.innerHTML=await(0,_str.get_string)("searchinputinvalid","local_quizanon"),void(errorcontainer.attributes.getNamedItem("hidden")&&errorcontainer.attributes.removeNamedItem("hidden"));let userElement=Array.from(document.querySelectorAll("h4")).find((el=>el.textContent.includes(usercode)));userElement?(errorcontainer.attributes.setNamedItem(document.createAttribute("hidden")),userElement.scrollIntoView({behavior:"smooth",block:"center"}),userElement.style.backgroundColor="yellow",setTimeout((()=>{userElement.style.backgroundColor=""}),2e3)):(errorcontainer.innerHTML=await(0,_str.get_string)("searchinputnotfound","local_quizanon"),errorcontainer.attributes.getNamedItem("hidden")&&errorcontainer.attributes.removeNamedItem("hidden"))}))}))}}));

//# sourceMappingURL=searchanon.min.js.map